page: get_mpich_pr
    module: perl

    $global $group = "pmodels"
    $global $repo = "mpich"
    $global $main = "main"
    $global $me = "hzhou"

    $if $0 =~ /get_osh_pr/
        $repo = "oshmpi"
        $main = "master"

    my $pr = $ARGV[0]
    $if $pr !~ /^\d+$/
        die "Usage: $0 [PR #]"

    my ($author, $branch)
    &call open_r, "curl -s https://api.github.com/repos/$group/$repo/pulls/$pr |"
        $if /^\s*"label":\s*"(\w+):(\S+)",/
            $if $1 ne $group
                ($author, $branch) = ($1, $2)
    $if !$author
        die "Failed to get remote PR branch\n"

    my $github_url = "https://github.com/$group/$repo"

    $if $author eq $me && $repo eq "mpich"
        $(set:A="$ENV{HOME}/mpich-github")
        $(set:B="$ENV{HOME}/work/mpich-github")
        $if -d $(A)
            $github_url = $(A)
        $elif -d $(B)
            $github_url = $(B)

    my $dir = "$repo$pr"
    system "git clone $github_url -b $main $dir"
    chdir "$dir"

    system "git remote add gh-$author https://github.com/$author/$repo"
    system "git fetch gh-$author"
    system "git checkout -b $branch gh-$author/$branch"


